!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://unpkg.com/onsenui/css/onsenui.css">
    <link rel="stylesheet" href="https://unpkg.com/onsenui/css/onsen-css-components.min.css">
    <script src="https://unpkg.com/onsenui/js/onsenui.min.js"></script>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
</head>
<body>
  <ons-navigator id="navigator">
        <ons-page>
            
          <div style="text-align: center; margin-top: 200px">
              <h1>Login to the Daily Intake Tracker</h1>
          <p>
            <ons-input id="username" placeholder="Username" modifier="underbar"></ons-input>
          </p>
      
          <p>
            <ons-input
              id="password"
              placeholder="Password"
              type="password"
              modifier="underbar"
            >
            </ons-input>
          </p>
      
          <p>
            <ons-button onclick="login()">Sign in</ons-button>
          </p>
              <p>or create an account</p>
          <p>
            <ons-button onclick='goCreate()'>Create Account</ons-button>
          </p>

          </div>
      
        </ons-page>
      </ons-navigator>

</body>
<script type="text/javascript">


const login = () => {
  const username = document.querySelector('#username').value;
  const password = document.querySelector('#password').value;

  if (username === localStorage.getItem('username') && password === localStorage.getItem('password')) {
    const navigator = document.querySelector('#navigator');
    navigator.resetToPage('home.html');
  } else {
    ons.notification.toast('Wrong username/password combination');
  }
}

function goCreate(){
  const navigator = document.querySelector('#navigator');
    navigator.resetToPage('create.html');
}


function create(){
const usernameKey = document.getElementById('createUsername').value;
localStorage.setItem('username',usernameKey);
const passwordKey = document.getElementById('createPassword').value;
localStorage.setItem('password',passwordKey);
const navigator = document.querySelector('#navigator');
    navigator.resetToPage('info.html');
}

function finish(){
const height = document.getElementById('height').value;
localStorage.setItem('height',height);

const weight = document.getElementById('weight').value;
localStorage.setItem('weight',weight);

const age = document.getElementById('age').value;
localStorage.setItem('age',age);

const gender = document.getElementById('gender').value;
localStorage.setItem('gender',gender);

const exercise = document.getElementById('exercise').value;
localStorage.setItem('exercise',exercise);

  const navigator = document.querySelector('#navigator');
    navigator.resetToPage('home.html');
}

/*function data(){
  const kilojules = document.getElementById('kilojules').value;
  localStorage.setItem('kilojules',kilojules);

  var d = new Date();
 
var date = d.getDate();
var month = d.getMonth() + 1;
var year = d.getFullYear();
 
var time = date + "/" + month + "/" + year;

localStorage.setItem('time',time);

const mealtype = document.getElementById('mealtype').value;
localStorage.setItem('mealtype',mealtype);

const mealname = document.getElementById('food').value;
localStorage.setItem('mealname',mealname);

ons.notification.toast('Data saved', {
    timeout: 2000
  });
}
*/
const loadPage = (page) => {
  document.querySelector('#menu').close();
  document.querySelector('#navigator').bringPageTop(page, { animation: 'fade' });
};


// meal.html

    
        /* let meal = [
            { type: "breakfast",
            photo: "picture.jpg",
            calorie: 2500
            }
        ]
        localStorage.setItem('mealinfo',JSON.stringify(meal)) */

        function addMeal(){

const food = document.getElementById('food').value
const mealtype = document.getElementById('mealtype').value
const kilojules = document.getElementById('kilojules').value
var d = new Date();
 
var date = d.getDate();
var month = d.getMonth() + 1;
var year = d.getFullYear();
 
var time = date + "/" + month + "/" + year;

let newMeal = { 
    type: mealtype,
    name: food,
    kilojules: kilojules,
    date: time,
    }

// let meals = JSON.parse(localStorage.getItem("mealinfo"))
// console.log(meals[0])

if(localStorage.getItem('mealinfo')===null){
    meals = [];
}else{
    meals = JSON.parse(localStorage.getItem('mealinfo'));
}

meals.push(newMeal)
console.log(meals)
localStorage.setItem('mealinfo',JSON.stringify(meals))
document.getElementById('food').value = ''
document.getElementById('mealtype').value = ''
document.getElementById('kilojules').value = ''

ons.notification.toast('Data saved', {
    timeout: 2000
  });
}



/*<div class="centre"> 
         <ons-input type="file" accept="image/*;capture=camera">
    </div> */

// report.html
</script>

</html>
